(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[763],{64317:function(G,y,e){"use strict";var D=e(22122),F=e(28991),I=e(81253),U=e(22270),v=e(67294),R=e(66758),W=e(38622),V=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],H=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],A=v.forwardRef(function(r,M){var Z=r.fieldProps,E=r.children,w=r.params,B=r.proFieldProps,$=r.mode,S=r.valueEnum,P=r.request,O=r.showSearch,T=r.options,L=(0,I.Z)(r,V),K=(0,v.useContext)(R.Z);return v.createElement(W.Z,(0,D.Z)({mode:"edit",valueEnum:(0,U.h)(S),request:P,params:w,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:T,mode:$,showSearch:O,getPopupContainer:K.getPopupContainer},Z),ref:M,proFieldProps:B},L),E)}),u=v.forwardRef(function(r,M){var Z=r.fieldProps,E=r.children,w=r.params,B=r.proFieldProps,$=r.mode,S=r.valueEnum,P=r.request,O=r.options,T=(0,I.Z)(r,H),L=(0,F.Z)({options:O,mode:$||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Z),K=(0,v.useContext)(R.Z);return v.createElement(W.Z,(0,D.Z)({mode:"edit",valueEnum:(0,U.h)(S),request:P,params:w,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({getPopupContainer:K.getPopupContainer},L),ref:M,proFieldProps:B},T),E)}),h=A,z=u,b=h;b.SearchSelect=z,b.displayName="ProFormComponent",y.Z=b},94750:function(G,y,e){"use strict";var D=e(81910),F=e(85893),I=function(v){var R=(0,D.md)();return(0,F.jsx)(D.Nv,{accessible:R[v.access],children:v.children})};y.Z=I},90820:function(G,y,e){"use strict";e.r(y),e.d(y,{default:function(){return ne}});var D=e(62350),F=e(24565),I=e(86582),U=e(57663),v=e(71577),R=e(17462),W=e(76772),V=e(11849),H=e(34792),A=e(48086),u=e(39428),h=e(3182),z=e(69610),b=e(54941),r=e(81306),M=e(80017),Z=e(94750),E=e(62260),w=e(1870),B=e(67265),$=e(25590),S=e(67294),P=e(81910),O=e(30381),T=e.n(O),L=[{title:"ID",dataIndex:"id",search:!1,fixed:"left",width:"120px"},{title:"\u5173\u952E\u8BCD",dataIndex:"keyword",search:!1,fixed:"left"},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",fixed:"left",width:"120px"},{title:"\u5FAE\u4FE1\u53F7",dataIndex:"wx",fixed:"left",width:"120px"},{title:"\u6296\u97F3\u53F7",dataIndex:"account",width:"120px"},{title:"\u6296\u97F3\u6635\u79F0",dataIndex:"nickname",search:!1},{title:"\u6027\u522B",dataIndex:"gender",search:!1,valueEnum:{1:{text:"\u7537",status:"Processing"},2:{text:"\u5973",status:"Success"},3:{text:"-"}}},{title:"\u5E74\u9F84",dataIndex:"age",search:!1,render:function(o){return o||"-"}},{title:"IP",dataIndex:"ip",search:!1},{title:"\u70B9\u8D5E\u6570",dataIndex:"zan_count",search:!1},{title:"\u5173\u6CE8\u6570",dataIndex:"focus_count",search:!1},{title:"\u7C89\u4E1D\u6570",dataIndex:"fans_count",search:!1},{title:"\u4F5C\u54C1\u6570",dataIndex:"work_count",search:!1},{title:"\u8BBE\u5907ID",dataIndex:"machine_id",search:!1},{title:"\u7B80\u4ECB",dataIndex:"desc",copyable:!0,width:200,ellipsis:!0,search:!1},{title:"\u5FAE\u4FE1\u72B6\u6001",dataIndex:"wx_status",search:!1,valueEnum:{0:{text:"\u5F85\u6DFB\u52A0"},1:{text:"\u6DFB\u52A0\u5931\u8D25",status:"Error"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u4F01\u5FAE\u72B6\u6001",dataIndex:"qw_status",search:!1,valueEnum:{0:{text:"\u5F85\u6DFB\u52A0"},1:{text:"\u6DFB\u52A0\u5931\u8D25",status:"Error"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateTime",width:180,search:!1,render:function(o){return T()(o.props.text*1e3).format("YYYY-MM-DD HH:mm:ss")}}],K=e(9715),_=e(55843),ee=e(2824),te=e(71975),Q=e(5966),X=e(64317),n=e(85893),ae=function(o){var f,g,d,x,p=_.Z.useForm(),i=(0,ee.Z)(p,1),t=i[0],m=(0,P.md)();return(0,n.jsxs)(te.a,{title:o.values?"\u7F16\u8F91":"\u6DFB\u52A0",form:t,preserve:!1,trigger:o.btn,layout:"horizontal",autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var c=(0,h.Z)((0,u.Z)().mark(function s(l){var C;return(0,u.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return l.id=((C=o.values)===null||C===void 0?void 0:C.id)||0,N.abrupt("return",o.onSubmit(l));case 2:case"end":return N.stop()}},s)}));return function(s){return c.apply(this,arguments)}}(),width:"400px",children:[(0,n.jsx)(Q.Z,{name:"mobile",labelCol:{span:6},label:"\u624B\u673A\u53F7",initialValue:((f=o.values)===null||f===void 0?void 0:f.mobile)||""}),(0,n.jsx)(Q.Z,{name:"wx",labelCol:{span:6},label:"\u5FAE\u4FE1\u53F7",initialValue:((g=o.values)===null||g===void 0?void 0:g.wx)||""}),(0,n.jsx)(X.Z,{label:"\u5DF2\u6DFB\u52A0\u5FAE\u4FE1",name:"wx_status",initialValue:((d=o.values)===null||d===void 0?void 0:d.wx_status)||0,options:[{label:"\u5DF2\u5B8C\u6210",value:2},{label:"\u6DFB\u52A0\u5931\u8D25",value:1},{label:"\u5F85\u6DFB\u52A0",value:0}]}),(0,n.jsx)(X.Z,{label:"\u5DF2\u6DFB\u52A0\u4F01\u5FAE",name:"qw_status",initialValue:((x=o.values)===null||x===void 0?void 0:x.qw_status)||0,options:[{label:"\u5DF2\u5B8C\u6210",value:2},{label:"\u6DFB\u52A0\u5931\u8D25",value:1},{label:"\u5F85\u6DFB\u52A0",value:0}]})]})},re=ae,J,k,q,j,ne=(J=window.connectModel("user","@@initialState"),k=Reflect.metadata("design:type",Function),q=Reflect.metadata("design:paramtypes",[Object]),J(j=k(j=q(j=function(Y){(0,r.Z)(f,Y);var o=(0,M.Z)(f);function f(g){var d,x,p,i,t;return(0,z.Z)(this,f),t=o.call(this,g),t.actionRef=void 0,t.state={agent_user_id:(d=P.m8.location.query)===null||d===void 0?void 0:d.agent_user_id,user_id:(x=P.m8.location.query)===null||x===void 0?void 0:x.user_id,user:(p=t.props.user)===null||p===void 0||(i=p.initialState)===null||i===void 0?void 0:i.currentUser,machineCount:0,loading:!1,loading2:!1},t.record={},t.getData=function(){var m=(0,h.Z)((0,u.Z)().mark(function c(s){var l;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.state.agent_user_id&&(s.agent_user_id=t.state.agent_user_id),t.state.user_id&&(s.user_id=t.state.user_id),a.next=4,(0,E.uQ)(s);case 4:return l=a.sent,a.abrupt("return",l);case 6:case"end":return a.stop()}},c)}));return function(c){return m.apply(this,arguments)}}(),t.handleRemove=function(){var m=(0,h.Z)((0,u.Z)().mark(function c(s){var l;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.X6)({id:s});case 2:l=a.sent,console.log(l),l.success&&(t.actionRef.current.reload(),A.ZP.success(l.msg));case 5:case"end":return a.stop()}},c)}));return function(c){return m.apply(this,arguments)}}(),t.handleUpdate=function(){var m=(0,h.Z)((0,u.Z)().mark(function c(s){var l;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.aS)((0,V.Z)({},s));case 2:if(l=a.sent,!l.success){a.next=7;break}return t.actionRef.current.reload(),A.ZP.success(l.msg),a.abrupt("return",!0);case 7:case"end":return a.stop()}},c)}));return function(c){return m.apply(this,arguments)}}(),t.downloads=function(m){var c=new Blob([m],{type:"text/plain"}),s=document.createElement("a");return s.style.display="none",s.href=URL.createObjectURL(c),s.download="vcf.vcf",document.body.appendChild(s),s.click(),document.body.removeChild(s),!0},t.exportVcf=function(){var m=(0,h.Z)((0,u.Z)().mark(function c(s){var l;return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s.limit!==60){a.next=6;break}if(!t.state.loading2){a.next=3;break}return a.abrupt("return");case 3:t.setState({loading2:!0}),a.next=9;break;case 6:if(!t.state.loading){a.next=8;break}return a.abrupt("return");case 8:t.setState({loading:!0});case 9:return a.next=11,(0,E.Nw)((0,V.Z)({},s));case 11:if(l=a.sent,t.setState({loading:!1,loading2:!1}),!(l.code===0&&t.downloads(l.data))){a.next=17;break}return t.actionRef.current.reload(),A.ZP.success("\u6210\u529F"),a.abrupt("return",!0);case 17:case"end":return a.stop()}},c)}));return function(c){return m.apply(this,arguments)}}(),t.actionRef=S.createRef(),t}return(0,b.Z)(f,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var d=this;return(0,n.jsxs)(B.ZP,{children:[this.state.user.role_type===1?(0,n.jsx)(W.Z,{style:{marginBottom:12+"px"},type:"warning",description:(0,n.jsx)("span",{children:"\u8BF7\u52FF\u5C06\u91C7\u96C6\u4FE1\u606F\u552E\u5356\u7ED9\u4ED6\u4EBA\uFF0C\u5426\u5219\u4E00\u5207\u540E\u679C\u81EA\u8D1F\uFF01"})}):void 0,(0,n.jsx)($.Z,{actionRef:this.actionRef,rowKey:"id",search:{labelWidth:86},scroll:{x:2500},toolBarRender:function(){return[(0,n.jsx)(Z.Z,{access:"Api_exportVcf",children:(0,n.jsx)(v.Z,{onClick:(0,h.Z)((0,u.Z)().mark(function p(){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.exportVcf({limit:300}));case 1:case"end":return t.stop()}},p)})),type:"primary",loading:d.state.loading,children:"\u5BFC\u51FA300\u6761\u7535\u8BDD\u53F7\u7801"})}),(0,n.jsx)(Z.Z,{access:"Api_exportVcf",children:(0,n.jsx)(v.Z,{onClick:(0,h.Z)((0,u.Z)().mark(function p(){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.exportVcf({limit:60}));case 1:case"end":return t.stop()}},p)})),type:"primary",loading:d.state.loading2,children:"\u5BFC\u51FA60\u6761\u7535\u8BDD\u53F7\u7801"})})]},request:this.getData,columns:[].concat((0,I.Z)(L),[{title:"\u64CD\u4F5C",width:120,fixed:"right",dataIndex:"option",valueType:"option",render:function(p,i){return[(0,n.jsx)(Z.Z,{access:"Api_updatePhone",children:(0,n.jsx)(re,{btn:(0,n.jsx)("a",{children:"\u4FEE\u6539"},"update_"+i.id),onSubmit:d.handleUpdate,values:i,roleType:d.state.user.role_type},"update__"+i.id)},"upd_"+i.id),(0,n.jsx)(Z.Z,{access:"Api_removeGrabTaskPhone",children:(0,n.jsxs)(F.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",icon:(0,n.jsx)(w.Z,{style:{color:"red"}}),onConfirm:function(){return d.handleRemove(i.id)},children:[" ",(0,n.jsx)("a",{children:"\u5220\u9664"},"delete_"+i.id)]},"delete__"+i.id)},"del_"+i.id)]}}])})]})}}]),f}(S.Component))||j)||j)||j)}}]);
