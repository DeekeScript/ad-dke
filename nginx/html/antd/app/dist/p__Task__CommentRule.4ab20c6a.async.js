(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[534],{70271:function(Q,E,e){"use strict";var Z=e(22122),h=e(28991),P=e(81253),R=e(67294),m=e(38622),C=["fieldProps","proFieldProps"],B=function(D,i){var f=D.fieldProps,I=D.proFieldProps,U=(0,P.Z)(D,C);return R.createElement(m.Z,(0,Z.Z)({mode:"edit",valueType:"digitRange",fieldProps:(0,h.Z)({},f),ref:i,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:I},U))};E.Z=R.forwardRef(B)},64317:function(Q,E,e){"use strict";var Z=e(22122),h=e(28991),P=e(81253),R=e(22270),m=e(67294),C=e(66758),B=e(38622),x=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],i=m.forwardRef(function(u,W){var g=u.fieldProps,L=u.children,K=u.params,V=u.proFieldProps,z=u.mode,j=u.valueEnum,G=u.request,N=u.showSearch,Y=u.options,H=(0,P.Z)(u,x),J=(0,m.useContext)(C.Z);return m.createElement(B.Z,(0,Z.Z)({mode:"edit",valueEnum:(0,R.h)(j),request:G,params:K,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:Y,mode:z,showSearch:N,getPopupContainer:J.getPopupContainer},g),ref:W,proFieldProps:V},H),L)}),f=m.forwardRef(function(u,W){var g=u.fieldProps,L=u.children,K=u.params,V=u.proFieldProps,z=u.mode,j=u.valueEnum,G=u.request,N=u.options,Y=(0,P.Z)(u,D),H=(0,h.Z)({options:N,mode:z||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},g),J=(0,m.useContext)(C.Z);return m.createElement(B.Z,(0,Z.Z)({mode:"edit",valueEnum:(0,R.h)(j),request:G,params:K,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:J.getPopupContainer},H),ref:W,proFieldProps:V},Y),L)}),I=i,U=f,$=I;$.SearchSelect=U,$.displayName="ProFormComponent",E.Z=$},90672:function(Q,E,e){"use strict";var Z=e(22122),h=e(81253),P=e(67294),R=e(38622),m=["fieldProps","proFieldProps"],C=function(x,D){var i=x.fieldProps,f=x.proFieldProps,I=(0,h.Z)(x,m);return P.createElement(R.Z,(0,Z.Z)({ref:D,mode:"edit",valueType:"textarea",fieldProps:i,proFieldProps:f},I))};E.Z=P.forwardRef(C)},94750:function(Q,E,e){"use strict";var Z=e(81910),h=e(85893),P=function(m){var C=(0,Z.md)();return(0,h.jsx)(Z.Nv,{accessible:C[m.access],children:m.children})};E.Z=P},9093:function(Q,E,e){"use strict";e.r(E),e.d(E,{default:function(){return de}});var Z=e(62350),h=e(24565),P=e(86582),R=e(57663),m=e(71577),C=e(91220),B=e(34792),x=e(48086),D=e(11849),i=e(39428),f=e(3182),I=e(69610),U=e(54941),$=e(81306),u=e(80017),W=e(94750),g=e(62260),L=e(49101),K=e(1870),V=e(67265),z=e(25590),j=e(67294),G=e(9715),N=e(55843),Y=e(2824),H=e(71975),J=e(5966),w=e(64317),ee=e(70271),ae=e(90672),n=e(85893),se=function(a){var t,F,v,c,l,s,d,p,o,b,r,k,ve=N.Z.useForm(),me=(0,Y.Z)(ve,1),ce=me[0];return(0,n.jsxs)(H.a,{title:a.values?"\u7F16\u8F91":"\u6DFB\u52A0",form:ce,preserve:!1,trigger:a.btn,layout:"horizontal",autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var q=(0,f.Z)((0,i.Z)().mark(function T(S){var X;return(0,i.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return S.id=((X=a.values)===null||X===void 0?void 0:X.id)||0,y.abrupt("return",a.onSubmit(S));case 2:case"end":return y.stop()}},T)}));return function(T){return q.apply(this,arguments)}}(),width:"500px",children:[(0,n.jsx)(J.Z,{name:"name",labelCol:{span:5},rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],label:"\u540D\u79F0",initialValue:((t=a.values)===null||t===void 0?void 0:t.name)||""}),(0,n.jsx)(w.Z,{mode:"multiple",name:"nickname_type",initialValue:((F=a.values)===null||F===void 0?void 0:F.nickname_type)&&JSON.parse((v=a.values)===null||v===void 0?void 0:v.nickname_type),labelCol:{span:5},label:"\u6635\u79F0\u7C7B\u578B",rules:[{required:!0,message:"\u6635\u79F0\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A"}],options:[{label:"\u4E0D\u9650",value:0},{label:"\u542B\u5B57\u6BCD",value:1},{label:"\u542B\u6570\u5B57",value:2},{label:"\u542B\u6C49\u5B57",value:3},{label:"\u542B\u8868\u60C5",value:4}],extra:"\u9009\u62E9\u201C\u5B57\u6BCD\u201D\u8868\u793A\u542B\u5B57\u6BCD\u5373\u53EF\uFF1B\u9009\u62E9\u4E24\u4E2A\u8868\u793A\u5FC5\u987B\u540C\u65F6\u5305\u542B\u4E24\u8005\uFF0C\u4EE5\u6B64\u7C7B\u63A8"}),(0,n.jsx)(w.Z,{name:"in_time",initialValue:(c=a.values)===null||c===void 0?void 0:c.in_time,labelCol:{span:5},label:"\u65F6\u95F4\u9650\u5236",rules:[{required:!0,message:"\u65F6\u95F4\u9650\u5236\u4E0D\u80FD\u4E3A\u7A7A"}],options:[{label:"30\u5206\u949F\u5185",value:1},{label:"1\u5C0F\u65F6\u5185",value:2},{label:"12\u5C0F\u65F6\u5185",value:3},{label:"3\u5929\u5185",value:4},{label:"7\u5929\u5185",value:5},{label:"1\u6708\u5185",value:6},{label:"3\u6708\u5185",value:7},{label:"6\u6708\u5185",value:8},{label:"\u4E0D\u9650\u5236",value:9}],extra:"\u5982\u679C\u7528\u6237\u7684\u8BC4\u8BBA\u65F6\u95F4\u6EE1\u8DB3\u6B64\u8981\u6C42\uFF0C\u5219\u53EF\u80FD\u4F1A\u5BF9\u8FD9\u6761\u8BC4\u8BBA\u6216\u8005\u8FD9\u6761\u8BC4\u8BBA\u7684\u7528\u6237\u8FDB\u884C\u64CD\u4F5C"}),(0,n.jsx)(w.Z,{mode:"multiple",name:"province_id",initialValue:(l=a.values)!==null&&l!==void 0&&l.province_id?JSON.parse((s=a.values)===null||s===void 0?void 0:s.province_id):void 0,labelCol:{span:5},label:"IP\u9650\u5236",rules:[{required:!0,message:"IP\u9650\u5236\u4E0D\u80FD\u4E3A\u7A7A"}],request:(0,f.Z)((0,i.Z)().mark(function q(){var T,S;return(0,i.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,a.getProvince();case 2:if(T=O.sent,!T.success){O.next=7;break}return S=T.data.map(function(y){return{label:y.name,value:y.id}}),S.unshift({label:"\u4E0D\u9650\u5236",value:0}),O.abrupt("return",S);case 7:case"end":return O.stop()}},q)})),extra:"\u5982\u679C\u7528\u6237\u7684\u8BC4\u8BBAIP\u6EE1\u8DB3\u6B64\u8981\u6C42\uFF0C\u5219\u53EF\u80FD\u4F1A\u5BF9\u8FD9\u6761\u8BC4\u8BBA\u6216\u8005\u8FD9\u6761\u8BC4\u8BBA\u7684\u7528\u6237\u8FDB\u884C\u64CD\u4F5C"}),(0,n.jsx)(ee.Z,{label:"\u8BC4\u8BBA\u957F\u5EA6\u533A\u95F4",name:"comment_range",initialValue:[(d=a.values)===null||d===void 0?void 0:d.min_comment,(p=a.values)===null||p===void 0?void 0:p.max_comment],labelCol:{span:5},separator:"-",separatorWidth:60,extra:"\u4E0D\u8BBE\u7F6E\u6216\u8005\u90FD\u8BBE\u7F6E\u4E3A0\u5219\u4E0D\u9650\u5236"}),(0,n.jsx)(ee.Z,{label:"\u70B9\u8D5E\u6570\u533A\u95F4",name:"zan_range",labelCol:{span:5},separator:"-",separatorWidth:60,initialValue:[(o=a.values)===null||o===void 0?void 0:o.min_zan,(b=a.values)===null||b===void 0?void 0:b.max_zan],extra:"\u4E0D\u8BBE\u7F6E\u6216\u8005\u90FD\u8BBE\u7F6E\u4E3A0\u5219\u4E0D\u9650\u5236"}),(0,n.jsx)(ae.Z,{initialValue:((r=a.values)===null||r===void 0?void 0:r.contain)||"",label:"\u5305\u542B\u5173\u952E\u8BCD",labelCol:{span:5},name:"contain",extra:(0,n.jsxs)("div",{children:["\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528\u4E2D\u6587\u9017\u53F7\uFF08\uFF0C\uFF09\u6216\u8005\u82F1\u6587\u9017\u53F7\uFF08,\uFF09\u9694\u5F00\u5373\u53EF\uFF01",(0,n.jsx)("a",{target:"_blank",href:"https://docs.qq.com/doc/DTk9sQ1RMdnZsaU5P",children:"\u70B9\u51FB\u67E5\u770B\u8BE6\u7EC6\u89C4\u5219"})]})}),(0,n.jsx)(ae.Z,{initialValue:((k=a.values)===null||k===void 0?void 0:k.no_contain)||"",label:"\u4E0D\u5305\u542B\u5173\u952E\u8BCD",labelCol:{span:5},name:"no_contain",extra:(0,n.jsxs)("div",{children:["\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528\u4E2D\u6587\u9017\u53F7\uFF08\uFF0C\uFF09\u6216\u8005\u82F1\u6587\u9017\u53F7\uFF08,\uFF09\u9694\u5F00\u5373\u53EF\uFF01",(0,n.jsx)("a",{target:"_blank",href:"https://docs.qq.com/doc/DTk9sQ1RMdnZsaU5P",children:"\u70B9\u51FB\u67E5\u770B\u8BE6\u7EC6\u89C4\u5219"})]})})]})},re=se,pe=e(71153),ne=e(60331),oe=e(30381),ie=e.n(oe),_=[{title:"ID",dataIndex:"id",search:!1,width:120,fixed:"left"},{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0,width:200,copyable:!0},{title:"\u6635\u79F0\u7C7B\u578B",dataIndex:"nickname_type",search:!1,render:function(a,t){if(!a)return"-";var F=["\u4E0D\u9650","\u7EAF\u82F1\u6587\u6216\u8005\u6570\u5B57","\u7EAF\u6C49\u5B57","\u7EAF\u8868\u60C5","\u5176\u4ED6"];return a=JSON.parse(a),a.map(function(v,c){return(0,n.jsx)(ne.Z,{children:F[v]},c)})}},{title:"\u65F6\u95F4\u9650\u5236",dataIndex:"in_time",search:!1,render:function(a){var t=["-","30\u5206\u949F\u5185","1\u5C0F\u65F6\u5185","12\u5C0F\u65F6\u5185","3\u5929\u5185","7\u5929\u5185","1\u6708\u5185","3\u6708\u5185","6\u6708\u5185","\u4E0D\u9650\u5236"];return t[a]||"-"}},{title:"IP\u9650\u5236",dataIndex:"province_name",search:!1,render:function(a){return a?a.map(function(t,F){return(0,n.jsx)(ne.Z,{children:t},F)}):"-"}},{title:"\u8BC4\u8BBA\u957F\u5EA6\u533A\u95F4",dataIndex:"min_comment",search:!1,render:function(a,t){return t.min_comment===0&&t.max_comment===0?"-":t.min_comment+" - "+t.max_comment}},{title:"\u70B9\u8D5E\u6570\u91CF\u533A\u95F4",dataIndex:"min_zan",render:function(a,t){return t.min_zan===0&&t.max_zan===0?"-":t.min_zan+" - "+t.max_zan},search:!1},{title:"\u5305\u542B\u5173\u952E\u8BCD",dataIndex:"contain",ellipsis:!0,width:200,copyable:!0,search:!1},{title:"\u4E0D\u5305\u542B\u5173\u952E\u8BCD",dataIndex:"no_contain",ellipsis:!0,width:200,copyable:!0,search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateTime",width:180,search:!1,render:function(a){return ie()(a.props.text*1e3).format("YYYY-MM-DD HH:mm:ss")}}],te,le,ue,A,de=(te=window.connectModel("user","@@initialState"),le=Reflect.metadata("design:type",Function),ue=Reflect.metadata("design:paramtypes",[Object]),te(A=le(A=ue(A=function(M){(0,$.Z)(t,M);var a=(0,u.Z)(t);function t(F){var v,c,l;return(0,I.Z)(this,t),l=a.call(this,F),l.actionRef=void 0,l.state={user:(v=l.props.user)===null||v===void 0||(c=v.initialState)===null||c===void 0?void 0:c.currentUser,columns:_},l.getData=function(){var s=(0,f.Z)((0,i.Z)().mark(function d(p){var o;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.Ug)(p);case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},d)}));return function(d){return s.apply(this,arguments)}}(),l.handleUpdate=function(){var s=(0,f.Z)((0,i.Z)().mark(function d(p){var o;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.jc)((0,D.Z)({},p));case 2:if(o=r.sent,!o.success){r.next=7;break}return l.actionRef.current.reload(),x.ZP.success(o.msg),r.abrupt("return",!0);case 7:case"end":return r.stop()}},d)}));return function(d){return s.apply(this,arguments)}}(),l.handleAdd=function(){var s=(0,f.Z)((0,i.Z)().mark(function d(p){var o;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.Z9)((0,D.Z)({},p));case 2:if(o=r.sent,!o.success){r.next=7;break}return l.actionRef.current.reload(),x.ZP.success(o.msg),r.abrupt("return",!0);case 7:case"end":return r.stop()}},d)}));return function(d){return s.apply(this,arguments)}}(),l.handleRemove=function(){var s=(0,f.Z)((0,i.Z)().mark(function d(p){var o;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.Cd)({id:p});case 2:o=r.sent,console.log(o),o.success&&(l.actionRef.current.reload(),x.ZP.success(o.msg));case 5:case"end":return r.stop()}},d)}));return function(d){return s.apply(this,arguments)}}(),l.actionRef=j.createRef(),l}return(0,U.Z)(t,[{key:"componentDidMount",value:function(){if(this.state.user.role_type!==2){var v=[],c=0,l=(0,C.Z)(_),s;try{for(l.s();!(s=l.n()).done;){var d=s.value;c++,c===_.length-1&&v.push({title:"\u7528\u6237",dataIndex:"userName",search:!1}),v.push(d)}}catch(p){l.e(p)}finally{l.f()}this.setState({columns:v})}}},{key:"render",value:function(){var v=this;return(0,n.jsx)(V.ZP,{children:(0,n.jsx)(z.Z,{actionRef:this.actionRef,scroll:{x:1800},rowKey:"id",search:{labelWidth:42},toolBarRender:function(){return[(0,n.jsx)(W.Z,{access:"Api_addCommentRule",children:(0,n.jsx)(re,{btn:(0,n.jsxs)(m.Z,{type:"primary",children:[(0,n.jsx)(L.Z,{}),"\u6DFB\u52A0"]}),onSubmit:v.handleAdd,values:void 0,getProvince:g.ol})},"unique")]},request:this.getData,columns:[].concat((0,P.Z)(this.state.columns),[{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:100,fixed:"right",render:function(l,s){return[(0,n.jsx)(re,{btn:(0,n.jsx)("a",{children:"\u4FEE\u6539"},"update_"+s.id),onSubmit:v.handleUpdate,values:s,getProvince:g.ol},"update__"+s.id),(0,n.jsxs)(h.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",icon:(0,n.jsx)(K.Z,{style:{color:"red"}}),onConfirm:function(){return v.handleRemove(s.id)},children:[" ",(0,n.jsx)("a",{children:"\u5220\u9664"},"delete_"+s.id)]},"delete__"+s.id)]}}])})})}}]),t}(j.Component))||A)||A)||A)}}]);
