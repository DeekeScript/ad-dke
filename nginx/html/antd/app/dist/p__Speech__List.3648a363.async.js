(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[682],{64317:function(G,B,e){"use strict";var y=e(22122),E=e(28991),D=e(81253),M=e(22270),v=e(67294),A=e(66758),H=e(38622),Z=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],o=v.forwardRef(function(s,C){var L=s.fieldProps,U=s.children,W=s.params,$=s.proFieldProps,g=s.mode,N=s.valueEnum,b=s.request,S=s.showSearch,K=s.options,V=(0,D.Z)(s,Z),Y=(0,v.useContext)(A.Z);return v.createElement(H.Z,(0,y.Z)({mode:"edit",valueEnum:(0,M.h)(N),request:b,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({options:K,mode:g,showSearch:S,getPopupContainer:Y.getPopupContainer},L),ref:C,proFieldProps:$},V),U)}),f=v.forwardRef(function(s,C){var L=s.fieldProps,U=s.children,W=s.params,$=s.proFieldProps,g=s.mode,N=s.valueEnum,b=s.request,S=s.options,K=(0,D.Z)(s,O),V=(0,E.Z)({options:S,mode:g||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},L),Y=(0,v.useContext)(A.Z);return v.createElement(H.Z,(0,y.Z)({mode:"edit",valueEnum:(0,M.h)(N),request:b,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({getPopupContainer:Y.getPopupContainer},V),ref:C,proFieldProps:$},K),U)}),R=o,J=f,T=R;T.SearchSelect=J,T.displayName="ProFormComponent",B.Z=T},90672:function(G,B,e){"use strict";var y=e(22122),E=e(81253),D=e(67294),M=e(38622),v=["fieldProps","proFieldProps"],A=function(Z,O){var o=Z.fieldProps,f=Z.proFieldProps,R=(0,E.Z)(Z,v);return D.createElement(M.Z,(0,y.Z)({ref:O,mode:"edit",valueType:"textarea",fieldProps:o,proFieldProps:f},R))};B.Z=D.forwardRef(A)},94750:function(G,B,e){"use strict";var y=e(81910),E=e(85893),D=function(v){var A=(0,y.md)();return(0,E.jsx)(y.Nv,{accessible:A[v.access],children:v.children})};B.Z=D},99653:function(G,B,e){"use strict";e.r(B),e.d(B,{default:function(){return oe}});var y=e(62350),E=e(24565),D=e(86582),M=e(57663),v=e(71577),A=e(91220),H=e(34792),Z=e(48086),O=e(11849),o=e(39428),f=e(3182),R=e(69610),J=e(54941),T=e(81306),s=e(80017),C=e(62260),L=e(49101),U=e(1870),W=e(67265),$=e(25590),g=e(67294),N=e(9715),b=e(55843),S=e(2824),K=e(71975),V=e(90672),Y=e(64317),a=e(85893),ee=function(p){var F,P,d=b.Z.useForm(),m=(0,S.Z)(d,1),h=m[0];return(0,a.jsxs)(K.a,{title:p.values?"\u7F16\u8F91":"\u6DFB\u52A0",form:h,preserve:!1,trigger:p.btn,layout:"horizontal",autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var r=(0,f.Z)((0,o.Z)().mark(function i(l){var n;return(0,o.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l.id=((n=p.values)===null||n===void 0?void 0:n.id)||0,c.abrupt("return",p.onSubmit(l));case 2:case"end":return c.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),width:"450px",children:[(0,a.jsx)(V.Z,{name:"desc",labelCol:{span:4},label:"\u8BDD\u672F\u5185\u5BB9",initialValue:((F=p.values)===null||F===void 0?void 0:F.desc)||"",extra:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:"\u8BA9\u4EBA\u4E00\u770B\u5C31\u61C2\uFF0C\u673A\u5668\u5374\u770B\u4E0D\u61C2"}),(0,a.jsx)("a",{target:"_blank",href:"https://docs.qq.com/doc/DTkpJVmZ3WUtDYlJW",children:"\u3010\u70B9\u51FB\u67E5\u770B\u65B9\u6CD5\u3011"}),(0,a.jsx)("p",{children:"\u591A\u6761\u8BDD\u672F\u4F7F\u7528\u7A7A\u884C\u9694\u5F00\u5373\u53EF\uFF01"})]}),fieldProps:{rows:12}}),(0,a.jsx)(Y.Z,{name:"level",labelCol:{span:4},initialValue:(P=p.values)===null||P===void 0?void 0:P.level,extra:(0,a.jsx)("div",{children:(0,a.jsx)("span",{children:"\u6DF7\u6DC6\u4E4B\u540E\uFF0C\u4E00\u53E5\u8BDD\u53EF\u4EE5\u751F\u6210\u591A\u4E2A\u53D8\u79CD\uFF0C\u7ED5\u8FC7\u98CE\u63A7\u7CFB\u7EDF\u68C0\u6D4B"})}),label:"\u6DF7\u6DC6\u7B49\u7EA7",options:[{label:"\u4E0D\u4F7F\u7528",value:0},{label:"\u63A8\u8350",value:1},{label:"\u9AD8\u7EA7",value:2},{label:"VIP[\u8054\u7CFB\u7BA1\u7406\u5458\u5F00\u901A]",disabled:!0,value:3}]})]})},Q=ee,re=e(30381),te=e.n(re),z=[{title:"ID",dataIndex:"id",search:!1},{title:"\u8BDD\u672F",dataIndex:"desc"},{title:"\u6DF7\u6DC6\u7EA7\u522B",dataIndex:"level",valueEnum:{0:{text:"\u4E0D\u4F7F\u7528"},1:{text:"\u63A8\u8350",status:"Success"},2:{text:"\u9AD8\u7EA7",status:"Processing"},3:{text:"VIP",status:"Error"}}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateTime",search:!1,render:function(p){return te()(p.props.text*1e3).format("YYYY-MM-DD HH:mm:ss")}}],ie=e(57338),ae=e(273),de=e(54421),X=e(38272),ne=function(p){var F=(0,g.useState)(!1),P=(0,S.Z)(F,2),d=P[0],m=P[1],h=(0,g.useState)(void 0),r=(0,S.Z)(h,2),i=r[0],l=r[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{onClick:function(){return m(!0)},children:"\u8BDD\u672F\u6DF7\u6DC6\u5217\u8868"}),(0,a.jsx)(ae.Z,{title:p.title,width:"420px",open:d,afterOpenChange:function(){var n=(0,f.Z)((0,o.Z)().mark(function u(c){var t;return(0,o.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(c){j.next=2;break}return j.abrupt("return");case 2:return j.next=4,p.values();case 4:t=j.sent,l(t);case 6:case"end":return j.stop()}},u)}));return function(u){return n.apply(this,arguments)}}(),onClose:function(){return m(!1)},children:(0,a.jsx)(X.ZP,{header:"",footer:(0,a.jsx)("div",{style:{color:"#666"},children:"\u63A8\u8350\u5BA2\u6237\u4F7F\u7528VIP\u6DF7\u6DC6\u6A21\u5F0F\uFF08\u5DF2\u5F00\u901A\u8BF7\u5FFD\u7565\uFF09"}),dataSource:i,renderItem:function(u,c){return(0,a.jsxs)(X.ZP.Item,{children:[c+1,". ",u]})}})})]})},ue=ne,se=e(94750),le=e(81910),k,q,_,I,oe=(k=window.connectModel("user","@@initialState"),q=Reflect.metadata("design:type",Function),_=Reflect.metadata("design:paramtypes",[Object]),k(I=q(I=_(I=function(w){(0,T.Z)(F,w);var p=(0,s.Z)(F);function F(P){var d,m,h,r;return(0,R.Z)(this,F),r=p.call(this,P),r.actionRef=void 0,r.state={user:(d=r.props.user)===null||d===void 0||(m=d.initialState)===null||m===void 0?void 0:m.currentUser,columns:z,id:(h=le.m8.location.query)===null||h===void 0?void 0:h.id},r.getData=function(){var i=(0,f.Z)((0,o.Z)().mark(function l(n){var u;return(0,o.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.id=r.state.id,t.next=3,(0,C.eo)(n);case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),r.speech=function(){var i=(0,f.Z)((0,o.Z)().mark(function l(n,u){var c;return(0,o.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,C.WN)({desc:n,level:u});case 2:if(c=x.sent,!c.success){x.next=5;break}return x.abrupt("return",c.data);case 5:return x.abrupt("return",[]);case 6:case"end":return x.stop()}},l)}));return function(l,n){return i.apply(this,arguments)}}(),r.handleUpdate=function(){var i=(0,f.Z)((0,o.Z)().mark(function l(n){var u;return(0,o.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.lib_id=r.state.id,t.next=3,(0,C.xk)((0,O.Z)({},n));case 3:if(u=t.sent,!u.success){t.next=8;break}return r.actionRef.current.reload(),Z.ZP.success(u.msg),t.abrupt("return",!0);case 8:case"end":return t.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),r.handleAdd=function(){var i=(0,f.Z)((0,o.Z)().mark(function l(n){var u;return(0,o.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.lib_id=r.state.id,t.next=3,(0,C.bG)((0,O.Z)({},n));case 3:if(u=t.sent,!u.success){t.next=8;break}return r.actionRef.current.reload(),Z.ZP.success(u.msg),t.abrupt("return",!0);case 8:case"end":return t.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),r.handleRemove=function(){var i=(0,f.Z)((0,o.Z)().mark(function l(n){var u;return(0,o.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,C.Hk)({id:n});case 2:u=t.sent,console.log(u),u.success&&(r.actionRef.current.reload(),Z.ZP.success(u.msg));case 5:case"end":return t.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),r.actionRef=g.createRef(),r}return(0,J.Z)(F,[{key:"componentDidMount",value:function(){if(this.state.user.role_type!==2){var d=[],m=0,h=(0,A.Z)(z),r;try{for(h.s();!(r=h.n()).done;){var i=r.value;m++,m===z.length-1&&d.push({title:"\u7528\u6237",dataIndex:"userName",search:!1}),d.push(i)}}catch(l){h.e(l)}finally{h.f()}this.setState({columns:d})}}},{key:"render",value:function(){var d=this;return(0,a.jsx)(W.ZP,{children:(0,a.jsx)($.Z,{actionRef:this.actionRef,rowKey:"id",search:{labelWidth:68},toolBarRender:function(){return[(0,a.jsx)(se.Z,{access:"Api_addSpeechLib",children:(0,a.jsx)(Q,{btn:(0,a.jsxs)(v.Z,{type:"primary",children:[(0,a.jsx)(L.Z,{}),"\u6DFB\u52A0"]}),onSubmit:d.handleAdd,values:void 0})})]},request:this.getData,columns:[].concat((0,D.Z)(this.state.columns),[{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(h,r){return[r.level>0?(0,a.jsx)(ue,{title:"\u6DF7\u6DC6\u8BDD\u672F\u5217\u8868",btn:(0,a.jsx)("a",{children:"\u6DF7\u6DC6\u8BDD\u672F\u5217\u8868"},"machine_"+r.id),values:(0,f.Z)((0,o.Z)().mark(function i(){return(0,o.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",d.speech(r.desc,r.level));case 1:case"end":return n.stop()}},i)}))},"speech__"+r.id):void 0,(0,a.jsx)(Q,{btn:(0,a.jsx)("a",{children:"\u4FEE\u6539"},"update_"+r.id),onSubmit:d.handleUpdate,values:r},"update__"+r.id),(0,a.jsxs)(E.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",icon:(0,a.jsx)(U.Z,{style:{color:"red"}}),onConfirm:function(){return d.handleRemove(r.id)},children:[" ",(0,a.jsx)("a",{children:"\u5220\u9664"},"delete_"+r.id)]},"delete__"+r.id)]}}])})})}}]),F}(g.Component))||I)||I)||I)}}]);
